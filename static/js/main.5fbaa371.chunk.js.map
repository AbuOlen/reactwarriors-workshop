{"version":3,"sources":["components/MovieItem.jsx","utils/api.js","components/MovieTabs.jsx","components/App.jsx","index.js"],"names":["MovieItem","state","willWatch","_this2","this","_this$props","props","data","deleteMovie","addMovieToWillWatch","deleteMovieFromWillWatch","react_default","a","createElement","className","src","concat","backdrop_path","poster_path","alt","title","vote_average","type","onClick","setState","React","Component","API_URL","API_KEY_3","MovieTabs","nextProps","nextState","console","log","sort_by","updateSortBy","handleClick","value","event","getClassLink","App","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","getMovies","fetch","then","response","json","movies","results","movie","id","updateMovies","filter","item","updateMoviesWillWatch","toConsumableArray","moviesWillWatch","push","prevProps","prevState","components_MovieTabs","map","key","components_MovieItem","length","ReactDOM","render","components_App","document","getElementById"],"mappings":"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","file":"static/js/main.5fbaa371.chunk.js","sourcesContent":["import React from \"react\";\n\nclass MovieItem extends React.Component {\n  state = {\n    willWatch: false\n  };\n\n  // componentWillUnmount() {\n  //   console.log(\"unmount\", this.props.data.title);\n  // }\n\n  render() {\n    const {\n      data,\n      deleteMovie,\n      addMovieToWillWatch,\n      deleteMovieFromWillWatch\n    } = this.props;\n    // props.data = {};\n    return (\n      <div className=\"card\">\n        <img\n          className=\"card-img-top\"\n          src={`https://image.tmdb.org/t/p/w500${data.backdrop_path ||\n            data.poster_path}`}\n          alt=\"\"\n        />\n        <div className=\"card-body\">\n          <h6 className=\"card-title\">{data.title}</h6>\n          <div className=\"d-flex justify-content-between align-items-center\">\n            <p className=\"mb-0\">Rating: {data.vote_average}</p>\n            {this.state.willWatch ? (\n              <button\n                type=\"button\"\n                className=\"btn btn-success\"\n                onClick={() => {\n                  this.setState({\n                    willWatch: false\n                  });\n                  deleteMovieFromWillWatch(data);\n                }}\n              >\n                Will Watch\n              </button>\n            ) : (\n              <button\n                type=\"button\"\n                className=\"btn btn-secondary\"\n                onClick={() => {\n                  this.setState({\n                    willWatch: true\n                  });\n                  addMovieToWillWatch(data);\n                }}\n              >\n                Will Watch\n              </button>\n            )}\n          </div>\n          <button\n            type=\"button\"\n            onClick={() => {\n              deleteMovie(data);\n            }}\n          >\n            Delete\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default MovieItem;\n","export const API_URL = \"https://api.themoviedb.org/3\";\n\nexport const API_KEY_3 = \"3f4ca4f3a9750da53450646ced312397\";\n\nexport const API_KEY_4 =\n  \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzZjRjYTRmM2E5NzUwZGE1MzQ1MDY0NmNlZDMxMjM5NyIsInN1YiI6IjVhYzlmNWRkOTI1MTQxNjJhZTA1Njk0NiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Fc4f9DVB6pFWh6hIjYe0NCC4pImdmNzDIfi_3Nb3tC4\";\n","import React from \"react\";\n\nclass MovieTabs extends React.Component {\n  componentWillReceiveProps(nextProps, nextState) {\n    console.log(\"MovieTabs willReceiveProps\");\n    console.log(\"nextProps sort_by\", nextProps.sort_by);\n    console.log(\"prevProps sort_by\", this.props.sort_by);\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (nextProps.sort_by !== this.props.sort_by) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  render() {\n    const { sort_by, updateSortBy } = this.props;\n    // const handleClick = value => () => {\n    //     updateSortBy(value);\n    //   };\n    // };\n    const handleClick = value => {\n      return event => {\n        updateSortBy(value);\n      };\n    };\n\n    const getClassLink = value => {\n      return `nav-link ${sort_by === value ? \"active\" : \"\"}`;\n    };\n\n    console.log(\"MovieTabs render\");\n\n    return (\n      <ul className=\"tabs nav nav-pills\">\n        <li className=\"nav-item\">\n          <div\n            // className={`nav-link ${\n            //   sort_by === \"popularity.desc\" ? \"active\" : \"\"\n            // }`}\n            className={getClassLink(\"popularity.desc\")}\n            onClick={handleClick(\"popularity.desc\")}\n          >\n            Popularity desc\n          </div>\n        </li>\n        <li className=\"nav-item\">\n          <div\n            className={getClassLink(\"revenue.desc\")}\n            onClick={handleClick(\"revenue.desc\")}\n          >\n            Revenue desc\n          </div>\n        </li>\n        <li className=\"nav-item\">\n          <div\n            className={getClassLink(\"vote_average.desc\")}\n            onClick={handleClick(\"vote_average.desc\")}\n            // onClick={event => {\n            //   updateSortBy(\"vote_average.desc\");\n            // }}\n          >\n            Vote avetage desc\n          </div>\n        </li>\n      </ul>\n    );\n  }\n}\n\nexport default MovieTabs;\n","import React from \"react\";\n// import { moviesData } from \"../moviesData\";\nimport MovieItem from \"./MovieItem\";\nimport { API_URL, API_KEY_3 } from \"../utils/api\";\nimport MovieTabs from \"./MovieTabs\";\n\n// UI = fn(state, props)\n\n// App = new React.Component()\n\nclass App extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      movies: [],\n      moviesWillWatch: [],\n      sort_by: \"revenue.desc\"\n    };\n\n    console.log(\"App constructor\");\n  }\n\n  componentDidMount() {\n    console.log(\"App didMount\");\n    // const _this = this\n    this.getMovies();\n    // console.log(\"after fetch\")\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    console.log(\"App didUpdate\");\n    // console.log(\"prev\", prevProps, prevState);\n    // console.log(\"this\", this.props, this.state);\n    if (prevState.sort_by !== this.state.sort_by) {\n      console.log(\"App call api\");\n      this.getMovies();\n    }\n  }\n\n  getMovies = () => {\n    fetch(\n      `${API_URL}/discover/movie?api_key=${API_KEY_3}&sort_by=${this.state.sort_by}`\n    )\n      .then(response => {\n        // console.log(\"then\", response);\n        return response.json();\n      })\n      .then(data => {\n        // console.log(\"data\", data);\n        this.setState({\n          movies: data.results\n        });\n      });\n  };\n\n  deleteMovie = movie => {\n    console.log(movie.id);\n    const updateMovies = this.state.movies.filter(item => item.id !== movie.id);\n    console.log(updateMovies);\n\n    // this.state.movies = updateMovies;\n    this.setState({\n      movies: updateMovies\n    });\n  };\n\n  addMovieToWillWatch = movie => {\n    const updateMoviesWillWatch = [...this.state.moviesWillWatch];\n    updateMoviesWillWatch.push(movie);\n\n    this.setState({\n      moviesWillWatch: updateMoviesWillWatch\n    });\n  };\n\n  deleteMovieFromWillWatch = movie => {\n    const updateMoviesWillWatch = this.state.moviesWillWatch.filter(\n      item => item.id !== movie.id\n    );\n\n    this.setState({\n      moviesWillWatch: updateMoviesWillWatch\n    });\n  };\n\n  updateSortBy = value => {\n    this.setState({\n      sort_by: value\n    });\n  };\n\n  render() {\n    console.log(\"App render\", this.state.sort_by);\n    return (\n      <div className=\"container\">\n        <div className=\"row mt-4\">\n          <div className=\"col-9\">\n            <div className=\"row mb-4\">\n              <div className=\"col-12\">\n                <MovieTabs\n                  sort_by={this.state.sort_by}\n                  updateSortBy={this.updateSortBy}\n                />\n              </div>\n            </div>\n            <div className=\"row\">\n              {this.state.movies.map(movie => {\n                return (\n                  <div className=\"col-6 mb-4\" key={movie.id}>\n                    <MovieItem\n                      data={movie}\n                      deleteMovie={this.deleteMovie}\n                      addMovieToWillWatch={this.addMovieToWillWatch}\n                      deleteMovieFromWillWatch={this.deleteMovieFromWillWatch}\n                    />\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n          <div className=\"col-3\">\n            <h4>Will Watch: {this.state.moviesWillWatch.length} movies</h4>\n            <ul className=\"list-group\">\n              {this.state.moviesWillWatch.map(movie => (\n                <li key={movie.id} className=\"list-group-item\">\n                  <div className=\"d-flex justify-content-between\">\n                    <p>{movie.title}</p>\n                    <p>{movie.vote_average}</p>\n                  </div>\n                </li>\n              ))}\n            </ul>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"./stylesheets/index.scss\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}